<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">

  <title>Archives | é•¿å¤œ | I Want Moreï¼</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="keywords" content="webpack">
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="stylesheet" href="/css/style.css?v=1.0.7">
  <script type="text/javascript">
    // Data Center
    var DC = {
      reward: true,
      lv: JSON.parse(
        '{"enable":true,"app_id":null,"app_key":null,"icon":true}'),
      v: JSON.parse(
        '{"enable":true,"appid":null,"appkey":null,"notify":false,"verify":false,"placeholder":"give me some sugers plz...","avatar":"wavatar"}'
      )
    };

  </script>
  <script type="text/javascript">
    window.lazyScripts = [];

  </script>
</head>

<body>
  <div id="loading" class="active"></div>

  <aside id="menu" class="hide">
    <div class="inner flex-row-vertical">
      <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light"
                                                                                      id="menu-off">
        <i class="icon icon-lg icon-close"></i>
      </a>
      <div class="brand-wrap" style="background-image:url(/)">
        <div class="brand">
          <a href="/" class="avatar waves-effect waves-circle waves-light">
            <img src="/img/avatar.jpg">
          </a>
          <hgroup class="introduce">
            <h5 class="nickname">é™ˆå®</h5>
            <a href="mailto:277133779@qq.com" title="277133779@qq.com" class="mail">277133779@qq.com</a>
          </hgroup>

          <ul class="menu-link">

            <li>
              <a href="https://github.com/codefine" target="_blank">
                <i class="icon icon-lg icon-github"></i>
              </a>
            </li>

          </ul>

        </div>
      </div>
      <div class="scroll-wrap flex-col">
        <ul class="nav">

          <li class="waves-block waves-effect">
            <a href="/">
              <i class="icon icon-lg icon-home"></i>
              HOME
            </a>
          </li>

          <li class="waves-block waves-effect">
            <a href="/categories">
              <i class="icon icon-lg icon-th-list"></i>
              CATEGORIES
            </a>
          </li>

          <li class="waves-block waves-effect">
            <a href="/tags">
              <i class="icon icon-lg icon-tags"></i>
              TAGS
            </a>
          </li>

          <li class="waves-block waves-effect">
            <a href="/archives">
              <i class="icon icon-lg icon-archives"></i>
              ARCHIVES
            </a>
          </li>

          <li class="waves-block waves-effect">
            <a href="/custom">
              <i class="icon icon-lg icon-plus-square"></i>
              CUSTOM
            </a>
          </li>

        </ul>
      </div>
    </div>
  </aside>

  <main id="main">
    <header class="top-header" id="header">
      <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on"
                                                                                        id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
          <span>å‰ç«¯æ¡†æ¶ï¼ˆä¸€ï¼‰</span>

        </div>

        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-search"></i>
        </a>

      </div>
    </header>
    <header class="content-header post-header">
      <div class="container fade-scale">
        <h1 class="title">å‰ç«¯æ¡†æ¶ï¼ˆä¸€ï¼‰</h1>
        <h5 class="subtitle">

          <time datetime="2017-11-27T03:34:42.000Z" itemprop="datePublished" class="page-time">
            2017-11-27
          </time>

          <ul class="article-category-list">
            <li class="article-category-list-item">
              <a class="article-category-list-link" href="/categories/æ¡†æ¶æ•´ç†/">æ¡†æ¶æ•´ç†</a>
            </li>
          </ul>

        </h5>

        <div class="remind">
          <p>æ€»è®¡æ–‡ç« (
            <span>32</span>)ç¯‡ï¼Œçº¦(
            <span>63.3K</span>)å­—</p>
          <p>Keep movingğŸ˜!!!</p>
        </div>

      </div>

    </header>

    <div id="site_search">
      <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..."
                                                                                        class="form-control pull-left" />
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
      </div>
      <div id="local-search-result"></div>
    </div>

    <div class="container body-wrap">
      <article id="post-æ¡†æ¶æ•´ç†/ä¸‡è¾¾é¢„è­¦ç›‘æ§é¡¹ç›®å‰ç«¯æ¡†æ¶æ•´ç†ï¼ˆ-ï¼‰" class="post-article article-type-post fade"
                                                                                      itemprop="blogPost">
        <div class="post-card">
          <h1 class="post-card-title">å‰ç«¯æ¡†æ¶ï¼ˆä¸€ï¼‰</h1>
          <div class="post-meta">
            <time class="post-time" title="2017-11-27 11:34:42" datetime="2017-11-27T03:34:42.000Z"
                                                                                            itemprop="datePublished">2017-11-27</time>

            <ul class="article-category-list">
              <li class="article-category-list-item">
                <a class="article-category-list-link" href="/categories/æ¡†æ¶æ•´ç†/">æ¡†æ¶æ•´ç†</a>
              </li>
            </ul>

            <span id="/2017/11/27/æ¡†æ¶æ•´ç†/ä¸‡è¾¾é¢„è­¦ç›‘æ§é¡¹ç›®å‰ç«¯æ¡†æ¶æ•´ç†ï¼ˆ-ï¼‰/" class="leancloud_visitors" data-flag-title="å‰ç«¯æ¡†æ¶ï¼ˆä¸€ï¼‰"
                                                                                            title="å‰ç«¯æ¡†æ¶ï¼ˆä¸€ï¼‰">

              <i class="icon icon-eye"></i>

              <span class="leancloud-visitors-count"></span>
            </span>

            <span>
              <i class="icon icon-comment-o"></i>
              <a href="/2017/11/27/æ¡†æ¶æ•´ç†/ä¸‡è¾¾é¢„è­¦ç›‘æ§é¡¹ç›®å‰ç«¯æ¡†æ¶æ•´ç†ï¼ˆ-ï¼‰/#comment">
                <span class="valine-comment-count" data-xid="/2017/11/27/æ¡†æ¶æ•´ç†/ä¸‡è¾¾é¢„è­¦ç›‘æ§é¡¹ç›®å‰ç«¯æ¡†æ¶æ•´ç†ï¼ˆ-ï¼‰/"></span>
              </a>
            </span>

          </div>
          <div class="post-content" id="post-content" itemprop="postContent">
            <h3 id="é …ç›®ä»‹ç´¹">
              <a href="#é …ç›®ä»‹ç´¹" class="headerlink" title="é …ç›®ä»‹ç´¹"></a>é …ç›®ä»‹ç´¹</h3>
            <p>è¿™ä¸ªé¡¹ç›®ç”±ç¾å›½ä¸€ç›‘æ§å…¬å¸çš„äº§å“pagerdutyå®šåˆ¶è€Œæ¥ï¼ŒåŸç‰ˆçš„pagerdutyå·²ç»ä¸èƒ½å¾ˆå¥½çš„å…¼å®¹ä¸‡è¾¾é‡‘èå†…éƒ¨çš„æ‰€æœ‰ç³»ç»Ÿï¼Œå› æ­¤é€‰æ‹©å¼€å‘è¿™ä¸€å¥—æ–°çš„pagerdutyæ¥æ»¡è¶³å†…éœ€ã€‚</p>
            <p>é¡¹ç›®æ¶æ„é‡‡ç”¨ä¼ ç»Ÿçš„ä¸­é€”å²›æ¨¡å¼ï¼Œå‰åç«¯åˆ†ç¦»ï¼Œå‰ç«¯é‡‡ç”¨webpack+vueä¸ºæ ¸å¿ƒæŠ€æœ¯æ ˆï¼Œåç«¯é‡‡ç”¨springboot+å¾®æœåŠ¡+feiclientæ¥å®ç°ï¼Œæ•°æ®åº“ä½¿ç”¨Mysql5.6ã€‚</p>
            <h3 id="å‰ç«¯æ¶æ„">
              <a href="#å‰ç«¯æ¶æ„" class="headerlink" title="å‰ç«¯æ¶æ„"></a>å‰ç«¯æ¶æ„</h3>
            <p>ç¬¬ä¸€ç‰ˆæ¶æ„ä½¿ç”¨reactå®Œæˆï¼Œé‡‡ç”¨react+webpack+redux+sogaå®Œæˆï¼Œç”±äºä¸‡è¾¾è¦æ±‚ï¼ŒæŠ€æœ¯æ ˆæ”¹ä¸ºä»¥vueä¸ºä¸»ï¼Œä¸‹é¢å°±vueä¸ºä¸»çš„å‰ç«¯æ¶æ„åšæ€»ç»“ï¼š</p>
            <h4 id="webpackåŸºç¡€é…ç½®">
              <a href="#webpackåŸºç¡€é…ç½®" class="headerlink" title="webpackåŸºç¡€é…ç½®"></a>webpackåŸºç¡€é…ç½®</h4>
            <pre><code>/* webpack.base.config.js    åŸºç¡€é…ç½®*/

const path = require(&apos;path&apos;);
const webpack = require(&apos;webpack&apos;);
const ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;);

module.exports = {
    entry: {
        main: &apos;./src/main&apos;,
        vendors: &apos;./src/vendors&apos;
    },
    output: {
        path: path.join(__dirname, &apos;../dist&apos;)
    },
    module: {
        rules: [{
                test: /\.vue$/,
                loader: &apos;vue-loader&apos;,
                options: {
                    loaders: {
                        less: .ExtractTextPluginextract({
                            use: [&apos;css-loader?minimize&apos;,    &apos;autoprefixer-loader&apos;, &apos;less-loader&apos;],
                            fallback: &apos;vue-style-loader&apos;
                        }),
                        css: ExtractTextPlugin.extract({
                            use: [&apos;css-loader&apos;, &apos;autoprefixer-loader&apos;],
                            fallback: &apos;vue-style-loader&apos;
                        })
                    }
                }
            },
            {
                test: /iview\/.*?js$/,
                loader: &apos;babel-loader&apos;
            },
            {
                test: /\.js$/,
                loader: &apos;babel-loader&apos;,
                exclude: /node_modules/
            },
            {
                test: /\.css$/,
                use: ExtractTextPlugin.extract({
                    use: [&apos;css-loader?minimize&apos;, &apos;autoprefixer-loader&apos;],
                    fallback: &apos;style-loader&apos;
                })
            },
            {
                test: /\.less/,
                use: ExtractTextPlugin.extract({
                    use: [&apos;autoprefixer-loader&apos;, &apos;less-loader&apos;],
                    fallback: &apos;style-loader&apos;
                })
            },
            {
                test: /\.(gif|jpg|png)\??.*$/,
                loader: &apos;file-loader&apos;,
                options: {
                    name: &apos;/assets/img/[hash].[ext]&apos;,
                }
            },
            {
                test: /\.(html|tpl)$/,
                loader: &apos;html-loader&apos;
            }
        ]
    },
    resolve: {
        extensions: [&apos;.js&apos;, &apos;.vue&apos;],
        alias: {
            &apos;vue&apos;: &apos;vue/dist/vue.esm.js&apos;,
            &apos;@pages&apos;: path.join(__dirname, &apos;../src/components/pages&apos;),
            &apos;@common&apos;: path.join(__dirname, &apos;../src/components/common&apos;),
            &apos;@util&apos;: path.join(__dirname, &apos;../src/libs&apos;),
        }
    }
};
</code></pre>
            <p>æœ¬åœ°ç¯å¢ƒé…ç½®ï¼š</p>
            <pre><code>/*webpack.dev.config.js*/

const webpack = require(&apos;webpack&apos;);
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
const ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;);
const merge = require(&apos;webpack-merge&apos;);
const webpackBaseConfig = require(&apos;./webpack.base.config.js&apos;);
const fs = require(&apos;fs&apos;);
const autoMergeJs = require(&apos;../scripts/autoMergeJs&apos;);
const path = require(&apos;path&apos;);   
// fs.open(&apos;../src/config/env.js&apos;, &apos;w&apos;, function(err, fd) {
//     const buf = &apos;export default &quot;development&quot;;&apos;;
//     fs.write(fd, buf, 0, buf.length, 0, function(err, written, buffer) {});
// });
module.exports = merge(webpackBaseConfig, {
    devtool: &apos;#source-map&apos;,
    output: {
        publicPath: &apos;/dist/&apos;,
        filename: &apos;[name].js&apos;,
        chunkFilename: &apos;[name].chunk.js&apos;
    },
    module: {
        rules: [
            {
                test: /\.(woff|svg|eot|ttf)\??.*$/,
                loader: &apos;url-loader?limit=2048&apos;
            },
        ]
    },
    plugins: [
        new autoMergeJs(),
        new ExtractTextPlugin({
            filename: &apos;[name].css&apos;,
            allChunks: true
        }),
        new webpack.optimize.CommonsChunkPlugin({
            name: &apos;vendors&apos;,
            filename: &apos;vendors.js&apos;
        }),
        new HtmlWebpackPlugin({
            title:&apos;Hedwig&apos;,
            filename: &apos;./index.html&apos;,
            template: &apos;./src/template/index.ejs&apos;,
            favicon: path.resolve(&apos;/assets/favicon.ico&apos;),
            inject: false
        })
    ]
});
</code></pre>
            <p>åœ¨åŸºç¡€é…ç½®é‡Œé‡‡ç”¨äº†é‡å¤ç¬¬ä¸‰æ–¹æ¨¡å—çš„ç»Ÿä¸€æ‰“åŒ…ï¼šå¤šå…¥å£vendorsã€ExtractTextPlugingæ’ä»¶ã€HtmlWebpackPluginã€è‡ªå®šä¹‰webpackæ’ä»¶</p>
            <h5 id="å¤šå…¥å£">
              <a href="#å¤šå…¥å£" class="headerlink" title="å¤šå…¥å£"></a>å¤šå…¥å£</h5>
            <p>ç”±äºå°†æ‰€æœ‰æ¨¡å—æ‰“åŒ…åˆ°ä¸€èµ·ä¹‹åæ–‡ä»¶çš„å¤§å°ä¼šä»¥Mè®°ï¼Œå¯¹äºä¸€æ¬¡æ–‡ä»¶è¯·æ±‚æ¥è¯´å¤ªå¤§ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä¼šå°†åŒä¸€åŠŸèƒ½æ¨¡å—çš„æ–‡ä»¶æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œä»¥å¤šå…¥å£çš„æ–¹å¼åˆ©ç”¨CommonChunkPulginæ¥å¤„ç†æˆå•ç‹¬çš„â€œ&lt;
              script&gt;â€æ ‡ç­¾è¿›è¡Œæ’å…¥ã€‚
              <br>è¿›è¡Œå¤šå…¥å£æ‰“åŒ…çš„è§„åˆ™æ€»ç»“å¦‚ä¸‹ï¼š </p>
            <ol>
              <li>æ‰“åŒ…ç²’åº¦è¦åˆé€‚ï¼Œæ¯ä¸€ä¸ªæ¨¡å—çš„å¤§å°æœ€å¥½ä¸è¦è¶…è¿‡500kb</li>
              <li>æ‰“åŒ…æ•°ç›®ä¸è¦è¶…è¿‡æµè§ˆå™¨å¹¶å‘è¯·æ±‚èµ„æºæ•°ï¼Œieä¸€èˆ¬ä¸º4ä¸ªï¼Œchromeä¸€èˆ¬ä¸º6ä¸ªï¼Œå¤šäº†å°±ä¼šå¯¼è‡´è¯·æ±‚
                <br>å¡é¡¿</li>
              <li>åˆ©ç”¨ç•™æµè§ˆå™¨304ç¼“å­˜ï¼Œå…¬å…±éƒ¨åˆ†ä»£ç åº”è¯¥éƒ½ä¸ºé™æ€èµ„æº</li>
              <li>åœ¨æ‰“åŒ…ä¸Šåº”è¯¥é¿å…å°†å±‚æ¬¡è¾ƒæ·±çš„èµ„æºæ‰“åŒ…åˆ°å…¥å£ä¸­ï¼Œåº”è¯¥åšæ‡’åŠ è½½ã€‚</li>
            </ol>
            <p>å…·ä½“é¡¹ç›®ä¸­è¡¨ç°å¦‚ä¸‹ï¼š </p>
            <ol>
              <li>ç¬¬ä¸‰æ–¹å…±ç”¨çš„åº“æ‰“ä¸€ä¸ªåŒ…ï¼Œæ¯”å¦‚vueå…¨å®¶æ¡¶</li>
              <li>å…¬å…±ç»„ä»¶æ‰“ä¸€ä¸ªåŒ…ï¼Œæ¯”å¦‚å¼¹çª—ç»„ä»¶ã€loadingç»„ä»¶</li>
              <li>é¡¹ç›®é€šç”¨çš„å·¥å…·ç±»æ‰“ä¸€ä¸ªåŒ…</li>
              <li>ä¸€ä¸ªå¤§çš„åŠŸèƒ½æ¨¡å—æ‰“ä¸€ä¸ªåŒ…ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œé¡¹ç›®ä¸ä¼šå¤§åˆ°è¿™ç§åœ°æ­¥</li>
              <li>æ¯ä¸ªåŠŸèƒ½æ¨¡å—çš„å­é¡µé¢è¿›è¡Œå¼‚æ­¥åŠ è½½ã€‚</li>
            </ol>
            <p>æœ¬é¡¹ç›®ä¸­ï¼Œç”±äºé¡¹ç›®ä½“ç§¯ä¸å¤§ï¼Œæ‰€ä»¥åªå¤šå‡ºäº†ä¸€ä¸ªç¬¬ä¸‰æ–¹å…¬å…±æ¨¡å—vendorsï¼Œå…¥å£æ–‡ä»¶ä¸­é…ç½®äº†vendorså…¥å£ï¼š </p>
            <pre><code>import Vue from &apos;vue&apos;;
import iView from &apos;iview&apos;;
import VueRouter from &apos;vue-router&apos;;
import axios from &apos;axios&apos;;
import Vuex from &apos;vuex&apos;;
import echarts from &apos;echarts&apos;;
import Cookies from &apos;js-cookie&apos;;
import clipboard from &apos;clipboard&apos;;
import html2canvas from &apos;html2canvas&apos;;
import rasterizehtml from &apos;rasterizehtml&apos;;
import store from &apos;store&apos;;
</code></pre>
            <p>ä¸Šé¢è¿™äº›ç¬¬ä¸‰æ–¹æ¨¡å—è¢«æ‰“åŒ…æˆvendorï¼Œåˆ©ç”¨CommonsChunkPluginæ¥å¤„ç†ï¼Œä»£ç ä¸­æœ‰è¯´æ˜ã€‚</p>
            <p>CommonsChunkPluginæ˜¯webpackæ’ä»¶ï¼Œç”¨æ¥æå–å‡ºå…¬å…±æ¨¡å—è¿›è¡Œæ‰“åŒ…ï¼Œåªåœ¨é¦–é¡µåŠ è½½ä¸€æ¬¡ä¾¿ç¼“å­˜èµ·æ¥ï¼Œä¸ä¼šå†é‡å¤æŠ“å–ã€‚</p>
            <h5 id="ExtractTextPluging">
              <a href="#ExtractTextPluging" class="headerlink" title="ExtractTextPluging"></a>ExtractTextPluging</h5>
            <p>extract-text-webpack-pluginæ’ä»¶ç”¨æ¥ä»bundleä¸­æå–å‡ºcssä½œä¸ºä¸€ä¸ªå…¬å…±çš„cssæ–‡ä»¶ã€‚åœ¨webpackçš„é…ç½®æ–‡ä»¶ä¸­å¼•ç”¨ï¼Œåœ¨loaderä¸­è®¾ç½®é¢å¤–çš„æå–ã€‚
            </p>
            <pre><code>{
            test: /\.vue$/,
            loader: &apos;vue-loader&apos;,
            options: {
                loaders: {
                    less: ExtractTextPlugin.extract({
                        use: [&apos;css-loader?minimize&apos;, &apos;autoprefixer-loader&apos;, &apos;less-loader&apos;],
                        fallback: &apos;vue-style-loader&apos;
                    }),
                    css: ExtractTextPlugin.extract({
                        use: [&apos;css-loader&apos;, &apos;autoprefixer-loader&apos;],
                        fallback: &apos;vue-style-loader&apos;
                    })
                }
            }
        }
</code></pre>
            <p>å®šä¹‰useæ¥ç¡®å®ä½¿ç”¨ä»€ä¹ˆæ¥è§£ææå–çš„å†…å®¹ï¼Œä½¿ç”¨fallbackæ¥å®šä¹‰ä»ä»€ä¹ˆä¸­æŠ½å–æ–‡ä»¶ã€‚ </p>
            <h5 id="HtmlWebpackPlugin">
              <a href="#HtmlWebpackPlugin" class="headerlink" title="HtmlWebpackPlugin"></a>HtmlWebpackPlugin</h5>
            <p>html-webpack-pluginæ˜¯ç”¨æ¥ç”ŸæˆHTMLæ–‡ä»¶å¹¶ä¸”è‡ªåŠ¨å¼•ç”¨æ‰“åŒ…çš„æ–‡ä»¶ã€‚å¯ä»¥æŒ‡å®šæ¨¡æ¿çš„ä½ç½®ï¼Œå¯ä»¥æŒ‡å®šå¼•ç”¨æ–‡ä»¶çš„ä½ç½®ï¼Œå¯ä»¥å¢åŠ titleï¼Œå¢åŠ faviconç­‰ç­‰ï¼Œæ˜¯ä¸€ä¸ªæœåŠ¡äºé¦–é¡µçš„æ’ä»¶ã€‚</p>
            <h5 id="è‡ªå®šä¹‰webpackæ’ä»¶">
              <a href="#è‡ªå®šä¹‰webpackæ’ä»¶" class="headerlink" title="è‡ªå®šä¹‰webpackæ’ä»¶"></a>è‡ªå®šä¹‰webpackæ’ä»¶</h5>
            <h6 id="cpmpileå’Œcompilation">
              <a href="#cpmpileå’Œcompilation" class="headerlink" title="cpmpileå’Œcompilation"></a>cpmpileå’Œcompilation</h6>
            <p>è‡ªå®šä¹‰webpacké€šå¸¸é€šè¿‡é‡å†™æ’ä»¶çš„applyæ–¹æ³•ï¼Œå¹¶ä¸”å°†webpackçš„compileä½œä¸ºå‚æ•°ä¼ é€’è¿›å…¥æ–¹æ³•ã€‚compileå¯¹è±¡æ—¶webpackåœ¨ç¼–è¯‘å¯åŠ¨æ—¶ï¼Œå°†é…ç½®æ–‡ä»¶æ•°æ®æ³¨å…¥åç”Ÿæˆçš„ç¼–è¯‘å¯¹è±¡ã€‚
              <br>compilationæ˜¯åœ¨æ–‡ä»¶å‘ç”Ÿå˜åŠ¨æ—¶ï¼Œwebpackçš„ä¸€ä¸ªä»£è¡¨å‘ç”Ÿå˜åŒ–çš„å¯¹è±¡ï¼Œä»–åŒ…å«äº†å„ç§å˜åŒ–çš„å›è°ƒ</p>
            <pre><code>function HelloWorldPlugin(){
}
HelloWorldPlugin.prototype.apply = function(compile){
    compile.plugin(&quot;emit&quot;,function(compilation,callback){
        //è¿™é‡Œåšæƒ³è¦çš„æ“ä½œï¼Œåšå®Œä»¥åè°ƒç”¨callbackï¼ˆï¼‰å®Œæˆ
        callback();
    })
}
</code></pre>
            <h5 id="AutoMerageæ’ä»¶">
              <a href="#AutoMerageæ’ä»¶" class="headerlink" title="AutoMerageæ’ä»¶"></a>AutoMerageæ’ä»¶</h5>
            <p>æœ¬é¡¹ç›®ä½¿ç”¨äº†è‡ªå®šä¹‰æ’ä»¶AutoMerageï¼ŒåŠŸèƒ½æ˜¯è¯»å–æ–‡ä»¶ç›®å½•ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯¹å¤–å¯¼å‡ºæ–‡ä»¶ã€‚ </p>
            <pre><code>/**
 * AutoMerage.js
 */

let fs = require(&apos;fs&apos;);
let Handlebars = require(&apos;handlebars&apos;);
let _ = require(&apos;lodash&apos;);
let util = require(&apos;./util&apos;);

function AutoMergeJs(options) {
}
AutoMergeJs.prototype.apply = function (compiler) {
    compiler.plugin(&apos;emit&apos;, function (compilation, callback) {
        function createIndex(src, targetFile) {
            //è·å–æ‰€æœ‰ç›®å½•æ–‡ä»¶çš„åå»ºæ˜ï¼Œé™¤æ¨¡æ¿ç›¸å…³æ–‡ä»¶
            let files = util.readFilesInDir(src, {
                prefix: &apos;.&apos;,
                excludeFiles: [&apos;index.vue&apos;, &apos;index.js&apos;, &apos;index.tpl&apos;],
                format: (f) =&gt; f.substring(0, _.lastIndexOf(f, &apos;.&apos;))
            });
            targetFile.forEach(f =&gt; {
                //è·å–æ¨¡æ¿æ–‡ä»¶
                let data = fs.readFileSync(src + &apos;/&apos; + f.template, &apos;utf-8&apos;);
                const template = Handlebars.compile(data);
                //åˆ©ç”¨ç›®å½•æ–‡ä»¶éå†æ¨¡æ¿ç”Ÿæˆæ–‡ä»¶
                let result = template({
                    list: files
                });
                try{
                    //è·å–åŸç¼–è¯‘ç»“æŸåçš„æ–‡ä»¶
                    let old = fs.readFileSync(src + &apos;/&apos; + f.target, &apos;utf-8&apos;);
                    //å¦‚æœå’Œæºæ–‡ä»¶ä¸åŒï¼Œåˆ™å°†æ–°çš„ç»“æœå†™å…¥åˆ°æ–‡ä»¶ä¸­
                    if (old !== result)
                        fs.writeFileSync(src + &apos;/&apos; + f.target, result);
                }catch(e){
                    fs.writeFileSync(src + &apos;/&apos; + f.target, result);
                }
            });
        }
        let _targetFile = [{
            template: &apos;index.tpl&apos;,
            target: &apos;index.js&apos;,
        }];
        createIndex(&apos;./src/actions&apos;, _targetFile);
        createIndex(&apos;./src/components/pages&apos;, _targetFile);
        createIndex(&apos;./src/components/common&apos;, _targetFile);
        callback();
    });
};
module.exports = AutoMergeJs;
</code></pre>
            <p>è¿›è¡Œæ¨¡æ¿æ–‡æœ¬æ“ä½œçš„å·¥å…·ç±»</p>
            <pre><code>/**
 * util.js
 */
var fs = require(&quot;fs&quot;);

//pathæ¨¡å—ï¼Œå¯ä»¥ç”Ÿäº§ç›¸å¯¹å’Œç»å¯¹è·¯å¾„
var path = require(&quot;path&quot;);
var _ = require(&quot;lodash&quot;);

//è¯»å–æ–‡ä»¶å­˜å‚¨æ•°ç»„
function readFilesInDir(dirUrl, option) {
    var fileArr = [];

    var {excludeFiles = []} = option;
    var {format = null} = option;
    var {prefix = &apos;&apos;} = option;

    //excludeFilesä¸­åŒ…å«fileæ—¶è¿”å›falseï¼›
    function exclude(file) {
        return !_.includes(excludeFiles, file);
    }

//è·å–æ–‡ä»¶æ•°ç»„
    function readFile(readurl, name) {
        var name = name;
        //åŒæ­¥è¯»å–æ–‡ä»¶ç›®å½•
        let files = fs.readdirSync(readurl);

        files.forEach(function (filename) {
            //è·å–æ–‡ä»¶çŠ¶æ€
            let stats = fs.statSync(path.join(readurl, filename));
            //å¦‚æœæ˜¯æ–‡ä»¶ä¸”ä¸æ˜¯index.vue/index.js/index.tplï¼Œè¿™ä¸‰ç§æ–‡ä»¶è¦è¿‡æ»¤æ‰
            if (stats.isFile() &amp;&amp; exclude(filename)) {
                //optionsã€‚formatå­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªå‡½æ•°
                if (!!option.format &amp;&amp; _.isFunction(option.format))
                    //è·å–æ–‡ä»¶å
                    filename = option.format(filename);
                var newUrl = name + &apos;/&apos; + filename;  // ./filename
                fileArr.push({name: filename, fullName: newUrl});
                //æ˜¯å­ç›®å½•åˆ™é€’å½’å¤„ç†
            } else if (stats.isDirectory()) {
                var dirName = filename;
                readFile(path.join(readurl, filename), name + &apos;/&apos; + dirName);
            }
        });
    }

    readFile(dirUrl, prefix);
    return _.chain(fileArr).filter(file =&gt; file.name &amp;&amp; file.name !==   &apos;&apos;).sortBy((f) =&gt; f.fullName).value();
}

module.exports = {readFilesInDir: readFilesInDir};
</code></pre>
            <p>è¿™é‡Œçš„å‡ ä¸ªå…³é”®æŠ€æœ¯æ˜¯Handlebarsã€fsã€lodashã€‚
              <br>Handlebarsæ˜¯ä¸€ç§æ¨¡æ¿æŠ€æœ¯ï¼Œé€šè¿‡å°†æ•°æ®å’Œæ¨¡æ¿ç»“åˆï¼Œåœ¨ç¼–è¯‘ä¹‹åå°±å¯ä»¥è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶ã€‚
              <br>index.tpl </p>
            <pre><code>//Do not modify this file, it will be auto generated
import vuexDecorator from &apos;../libs/vuexDecorator&apos;;
{{#list}}
import  {{this.name}} from &apos;{{this.fullName}}&apos;;
{{/list}}

export default {
{{#list}}
    {{this.name}}: vuexDecorator(&apos;{{this.name}}&apos;,{{this.name}}),
{{/list}}
}
</code></pre>
            <p>ç¼–è¯‘æ¨¡æ¿ï¼š </p>
            <pre><code>//è·å–æ¨¡æ¿æ–‡ä»¶
let data = fs.readFileSync(src + &apos;/&apos; + f.template, &apos;utf-8&apos;);
const template = Handlebars.compile(data);
//åˆ©ç”¨ç›®å½•æ–‡ä»¶éå†æ¨¡æ¿ç”Ÿæˆæ–‡ä»¶
let result = template({
    list: files
});
</code></pre>
            <p>å†™å›æ–‡ä»¶ï¼š</p>
            <pre><code>fs.writeFileSync(src + &apos;/&apos; + f.target, result);
</code></pre>
            <p>åœ¨å¯¹jsä½¿ç”¨æŒ‰ç…§è¿™ç§æ–¹æ³•å°±å¯ä»¥å®ç°åŠ¨æ€é…ç½®ï¼Œå‡å°‘ä»£ç é‡ã€‚</p>
            <p>fsæ˜¯nodejså†…ç½®çš„æ¨¡å—ï¼Œå¯ä»¥åšæ–‡ä»¶è¯»å†™ï¼Œè¿™é‡Œæœ‰å‡ ä¸ªå…³é”®çš„å‡½æ•°ï¼š</p>
            <ol>
              <li>fs.readFileSync() è¯»å–æ–‡ä»¶å†…å®¹</li>
              <li>fs.writeFileSync() å†™å…¥æ–‡ä»¶</li>
              <li>fs.statSync() è·å–æ–‡ä»¶çŠ¶æ€ï¼Œè¿”å›Statsç±»</li>
              <li>stats.isFile() æ˜¯å¦æ˜¯æ–‡ä»¶</li>
              <li>stats.isDirectory() æ˜¯å¦æ˜¯ç›®å½•</li>
              <li>fs.readdirSync() è¯»å–æ–‡æ¡£ç›®å½•ç»“æ„</li>
            </ol>
            <p>lodashæ˜¯å’Œunderscoreç±»ä¼¼çš„å‡½æ•°å¼å˜æˆçš„åº“ï¼Œæä¾›äº†å¤§é‡çš„å®ç”¨çš„æ–¹æ³•ã€‚</p>

          </div>

          <blockquote class="post-copyright">
            <div class="content">
              <span class="post-time">
                Last updated:
                <time datetime="2017-11-28T08:02:18.201Z" itemprop="dateUpdated">2017-11-28 16:02:18</time>
              </span>
              <br> è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š

              <a href="/2017/11/27/æ¡†æ¶æ•´ç†/ä¸‡è¾¾é¢„è­¦ç›‘æ§é¡¹ç›®å‰ç«¯æ¡†æ¶æ•´ç†ï¼ˆ-ï¼‰/" target="_blank" rel="external">https://peacecup.github.io/2017/11/27/æ¡†æ¶æ•´ç†/ä¸‡è¾¾é¢„è­¦ç›‘æ§é¡¹ç›®å‰ç«¯æ¡†æ¶æ•´ç†ï¼ˆ-ï¼‰/</a>

            </div>
            <footer>
              <a href="https://peacecup.github.io">
                <img src="/img/avatar.jpg" alt="é™ˆå®"> é™ˆå®
              </a>
            </footer>
          </blockquote>

          <div class="page-reward">
            <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">èµ</a>
          </div>

          <div class="post-footer">
            <ul class="article-tag-list">
              <li class="article-tag-list-item">
                <a class="article-tag-list-link" href="/tags/webpack/">webpack</a>
              </li>
            </ul>

            <div class="page-share-wrap">
              <div class="page-share" id="pageShare">
                <ul class="reset share-icons">

                  <li>
                    <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://peacecup.github.io/2017/11/27/æ¡†æ¶æ•´ç†/ä¸‡è¾¾é¢„è­¦ç›‘æ§é¡¹ç›®å‰ç«¯æ¡†æ¶æ•´ç†ï¼ˆ-ï¼‰/&title=ã€Šå‰ç«¯æ¡†æ¶ï¼ˆä¸€ï¼‰ã€‹ â€” é•¿å¤œ&pic=https://peacecup.github.io/img/avatar.jpg"
                                                                                                    data-title="å¾®åš">
                      <i class="icon icon-weibo"></i>
                    </a>
                  </li>

                  <li>
                    <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
                      <i class="icon icon-weixin"></i>
                    </a>
                  </li>

                  <li>
                    <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://peacecup.github.io/2017/11/27/æ¡†æ¶æ•´ç†/ä¸‡è¾¾é¢„è­¦ç›‘æ§é¡¹ç›®å‰ç«¯æ¡†æ¶æ•´ç†ï¼ˆ-ï¼‰/&title=ã€Šå‰ç«¯æ¡†æ¶ï¼ˆä¸€ï¼‰ã€‹ â€” é•¿å¤œ&source=æ‰“å¼€æ–°ä¸–ç•Œçš„å¤§é—¨"
                                                                                                    data-title=" QQ">
                      <i class="icon icon-qq"></i>
                    </a>
                  </li>

                </ul>
              </div>

              <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
                <i class="icon icon-share-alt icon-lg"></i>
              </a>
            </div>

          </div>

          <div id="comment">
          </div>

        </div>
        <nav class="post-nav flex-row flex-justify-between">

          <div class="waves-block waves-effect prev">
            <a href="/2017/11/28/æ¡†æ¶æ•´ç†/æ¡†æ¶æ•´ç†ï¼ˆä¸‰ï¼‰--mianå…¥å£æ–‡ä»¶/" id="post-prev" class="post-nav-link">
              <div class="tips">
                <i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
              <h4 class="title">ä¸‡è¾¾ç›‘æ§é¢„è­¦é¡¹ç›®å‰ç«¯æ¡†æ¶æ•´ç†ï¼ˆä¸‰ï¼‰----é¡¹ç›®å…¥å£æ–‡ä»¶</h4>
            </a>
          </div>

          <div class="waves-block waves-effect next">
            <a href="/2017/11/27/vueæºç å­¦ä¹ /æ•°æ®ç›‘æ§/" id="post-next" class="post-nav-link">
              <div class="tips">Next
                <i class="icon icon-angle-right icon-lg icon-pl"></i>
              </div>
              <h4 class="title">[no title]</h4>
            </a>
          </div>

        </nav>

      </article>

      <div id="reward" class="page-modal reward-lay">
        <a class="close" href="javascript:;">
          <i class="icon icon-close"></i>
        </a>
        <h3 class="reward-title">
          <i class="icon icon-quote-left"></i>
          æˆ‘ä»¬ä¸€èµ·æ¥è®©è¿™ä¸ªä¸–ç•Œæœ‰è¶£ä¸€ç‚¹
          <i class="icon icon-quote-right"></i>
        </h3>
        <div class="reward-content">

          <div class="reward-code">
            <img id="rewardCode" src="/img/reward-wechat.jpg" alt="æ‰“èµäºŒç»´ç ">
          </div>

          <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg"
                                                                                            data-alipay="/img/reward-alipay.jpg">
            <div class="reward-toggle-ctrol">
              <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
              <span class="reward-toggle-label"></span>
              <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
          </label>

        </div>
      </div>

    </div>
    <aside class="post-widget">
      <nav class="post-toc-wrap" id="post-toc">
        <h4>TOC</h4>
        <ol class="post-toc">
          <li class="post-toc-item post-toc-level-3">
            <a class="post-toc-link" href="#é …ç›®ä»‹ç´¹">
              <span class="post-toc-number">1.</span>
              <span class="post-toc-text">
                é …ç›®ä»‹ç´¹</span>
            </a>
          </li>
          <li class="post-toc-item post-toc-level-3">
            <a class="post-toc-link" href="#å‰ç«¯æ¶æ„">
              <span class="post-toc-number">2.</span>
              <span class="post-toc-text">
                å‰ç«¯æ¶æ„</span>
            </a>
            <ol class="post-toc-child">
              <li class="post-toc-item post-toc-level-4">
                <a class="post-toc-link" href="#webpackåŸºç¡€é…ç½®">
                  <span class="post-toc-number">2.1.</span>
                  <span class="post-toc-text">
                    webpackåŸºç¡€é…ç½®</span>
                </a>
                <ol class="post-toc-child">
                  <li class="post-toc-item post-toc-level-5">
                    <a class="post-toc-link" href="#å¤šå…¥å£">
                      <span class="post-toc-number">2.1.1.</span>
                      <span class="post-toc-text">
                        å¤šå…¥å£</span>
                    </a>
                  </li>
                  <li class="post-toc-item post-toc-level-5">
                    <a class="post-toc-link" href="#ExtractTextPluging">
                      <span class="post-toc-number">2.1.2.</span>
                      <span class="post-toc-text">
                        ExtractTextPluging</span>
                    </a>
                  </li>
                  <li class="post-toc-item post-toc-level-5">
                    <a class="post-toc-link" href="#HtmlWebpackPlugin">
                      <span class="post-toc-number">2.1.3.</span>
                      <span class="post-toc-text">
                        HtmlWebpackPlugin</span>
                    </a>
                  </li>
                  <li class="post-toc-item post-toc-level-5">
                    <a class="post-toc-link" href="#è‡ªå®šä¹‰webpackæ’ä»¶">
                      <span class="post-toc-number">2.1.4.</span>
                      <span class="post-toc-text">
                        è‡ªå®šä¹‰webpackæ’ä»¶</span>
                    </a>
                    <ol class="post-toc-child">
                      <li class="post-toc-item post-toc-level-6">
                        <a class="post-toc-link" href="#cpmpileå’Œcompilation">
                          <span class="post-toc-number">2.1.4.1.</span>
                          <span class="post-toc-text">
                            cpmpileå’Œcompilation</span>
                        </a>
                      </li>
                    </ol>
                  </li>
                  <li class="post-toc-item post-toc-level-5">
                    <a class="post-toc-link" href="#AutoMerageæ’ä»¶">
                      <span class="post-toc-number">2.1.5.</span>
                      <span class="post-toc-text">
                        AutoMerageæ’ä»¶</span>
                    </a>
                  </li>
                </ol>
              </li>
            </ol>
          </li>
        </ol>
      </nav>
    </aside>

    <footer class="footer">

      <div class="top">

        <p>
          <span>Linksï¼š</span>

          <span class="blogroll-item">
            <a href="https://www.github.com" target="_blank">github</a>
          </span>

          <span class="blogroll-item">
            <a href="https://www.gitee.com" target="_blank">gitee</a>
          </span>

          <span class="blogroll-item">
            <a href="https://www.coding.net" target="_blank">coding</a>
          </span>

        </p>

      </div>

      <div class="bottom">
        <p>
          <span>
            é™ˆå® &copy; 2017
          </span>

          <span>
            Power by
            <a href="http://hexo.io/" target="_blank">Hexo</a> Theme
            <a href="https://github.com/codefine/hexo-theme-mellow" target="_blank">mellow</a>
          </span>

        </p>
      </div>
    </footer>

  </main>
  <div class="mask" id="mask"></div>
  <a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light">
    <span class="icon icon-lg icon-chevron-up"></span>
  </a>

  <div class="global-share" id="globalShare">
    <ul class="reset share-icons">

      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://peacecup.github.io/2017/11/27/æ¡†æ¶æ•´ç†/ä¸‡è¾¾é¢„è­¦ç›‘æ§é¡¹ç›®å‰ç«¯æ¡†æ¶æ•´ç†ï¼ˆ-ï¼‰/&title=ã€Šå‰ç«¯æ¡†æ¶ï¼ˆä¸€ï¼‰ã€‹ â€” é•¿å¤œ&pic=https://peacecup.github.io/img/avatar.jpg"
                                                                                        data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>

      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>

      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://peacecup.github.io/2017/11/27/æ¡†æ¶æ•´ç†/ä¸‡è¾¾é¢„è­¦ç›‘æ§é¡¹ç›®å‰ç«¯æ¡†æ¶æ•´ç†ï¼ˆ-ï¼‰/&title=ã€Šå‰ç«¯æ¡†æ¶ï¼ˆä¸€ï¼‰ã€‹ â€” é•¿å¤œ&source=æ‰“å¼€æ–°ä¸–ç•Œçš„å¤§é—¨"
                                                                                        data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>

    </ul>
  </div>

  <div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;">
      <i class="icon icon-close"></i>
    </a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=https://peacecup.github.io/2017/11/27/æ¡†æ¶æ•´ç†/ä¸‡è¾¾é¢„è­¦ç›‘æ§é¡¹ç›®å‰ç«¯æ¡†æ¶æ•´ç†ï¼ˆ-ï¼‰/"
                                                                                    alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
  </div>

  <!-- main-js -->
  <script type="text/javascript" src="//cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
  <script type="text/javascript" src="/js/plugins/fastclick.js?v=1.0.7"></script>

  <script type="text/javascript" src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

  <script type="text/javascript" src="/js/method.js?v=1.0.7"></script>
  <script type="text/javascript" src="/js/blog.js?v=1.0.7"></script>

  <!-- third-party -->

  <script type="text/javascript" src="/js/plugins/local_search.js?v=1.0.7"></script>
  <script type="text/javascript">
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    searchFunc(path, "local-search-input", "local-search-result");

  </script>

  <script type="text/javascript" src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script type="text/javascript" src="//unpkg.com/valine/dist/Valine.min.js"></script>
  <script type="text/javascript" src="/js/plugins/valine.js?v=1.0.7"></script>

  <script type="text/javascript" src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script type="text/javascript" src="/js/plugins/leancloud_visitors.js?v=1.0.7"></script>

  <!-- mathjax config similar to math.stackexchange -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes:
    true, skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'] }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() { var all = MathJax.Hub.getAllJax(), i; for (i=0; i
    < all.length; i +=1 ) { all[i].SourceElement().parentNode.className +=' has-jax'
                                                                                    ; } }); </script>

      <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

</body>

</html>
